(this["webpackJsonpmask-tracker"]=this["webpackJsonpmask-tracker"]||[]).push([[0],{31:function(e,a,t){e.exports=t(43)},40:function(e,a,t){},41:function(e,a,t){},42:function(e,a,t){},43:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(9),o=t.n(s),c=t(19),l=t(20),i=t(30),m=t(22),u=t(28),d=(t(13),t(47)),v=t(45),p={plenty:{message:"100\uac1c \uc774\uc0c1",style:"success",level:5},some:{message:"30 - 99",style:"warning",level:4},few:{message:"2 - 29",style:"danger",level:3},empty:{message:"0 - 1",style:"dark",level:2},break:{message:"\ud310\ub9e4\uc911\uc9c0",style:"secondary",level:1}},g=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(r)))).state={stores:[],boundary:500,onSearching:!1},t.load=function(){t.setState({onSearching:!0}),navigator.geolocation.getCurrentPosition((function(e){var a=e.coords.latitude,n=e.coords.longitude,r=t.state.boundary,s=[];fetch("https://8oi9s0nnth.apigw.ntruss.com/corona19-masks/v1/storesByGeo/json?lat=".concat(a,"&lng=").concat(n,"&m=").concat(r)).then((function(e){return e.json()})).then((function(e){e.stores.forEach((function(e){e.distance=t.computeDistance(a,n,e.lat,e.lng).toFixed(2),e.remain_level=e.remain_stat?p[e.remain_stat].level:0,s.push(e)})),s.sort((function(e,a){return e.remain_level===a.remain_level?e.distance>=a.distance?1:-1:e.remain_level<a.remain_level?1:-1})),t.setState({stores:s,onSearching:!1})}))}))},t.computeDistance=function(e,a,n,r){var s=t.degreesToRadians(e),o=t.degreesToRadians(a),c=t.degreesToRadians(n),l=t.degreesToRadians(r);return 6371*Math.acos(Math.sin(s)*Math.sin(c)+Math.cos(s)*Math.cos(c)*Math.cos(o-l))},t.degreesToRadians=function(e){return e*Math.PI/180},t.selectChangeHandler=function(e){t.setState({boundary:e.target.value}),t.load()},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.load()}},{key:"render",value:function(){var e=this.state,a=e.stores,t=e.onSearching;return r.a.createElement("div",{className:"app"},r.a.createElement(d.a.Group,{controlId:"boundary-size-form"},r.a.createElement(d.a.Control,{as:"select",custom:"true",onChange:this.selectChangeHandler},r.a.createElement("option",{value:"500"},"0.5km"),r.a.createElement("option",{value:"1000"},"1km"),r.a.createElement("option",{value:"2000"},"2km"),r.a.createElement("option",{value:"3000"},"3km"),r.a.createElement("option",{value:"4000"},"4km"),r.a.createElement("option",{value:"5000"},"5km"))),r.a.createElement(v.a,{variant:"success",onClick:this.load},"\uc0c8\ub85c\uace0\uce68"),r.a.createElement("div",{className:"app-contents"},t?r.a.createElement(M,{variant:"primary",message:"\uacf5\uc801\ub9c8\uc2a4\ud06c \ud310\ub9e4 \uc57d\uad6d\uc744 \uac80\uc0c9\uc911\uc785\ub2c8\ub2e4..."}):0===a.length?r.a.createElement(M,{variant:"warning",message:"\uc694\uccad\ud558\uc2e0 \ubc94\uc704 \uc548\uc5d0 \uacf5\uc801\ub9c8\uc2a4\ud06c \ud310\ub9e4 \uc57d\uad6d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4..."}):a.map((function(e,a){return r.a.createElement(w,{key:a,store:e})}))))}}]),a}(n.Component),h=(t(40),g),f=t(49),E=t(46);function k(e){return p[e]?p[e].style:"secondary"}function y(e){return e.name+","+e.lat+","+e.lng}function _(e){window.open("https://map.kakao.com/link/map/".concat(e.target.name))}function b(e){window.open("https://map.kakao.com/link/search/".concat(e.target.name," \uacf5\uc801\ud310\ub9e4\ucc98"))}t(41);var w=function(e){var a=e.store;return r.a.createElement("div",{className:"store"},r.a.createElement(f.a,{style:{width:"20rem"},border:k(a.remain_stat)},r.a.createElement(f.a.Header,null,a.name),r.a.createElement(f.a.Body,null,r.a.createElement(f.a.Text,null,a.addr),r.a.createElement(v.a,{variant:k(a.remain_stat),size:"sm",name:y(a),onClick:_},"\uc9c0\ub3c4\uc5d0\uc11c \ubcf4\uae30"),"\xa0",r.a.createElement(v.a,{variant:k(a.remain_stat),size:"sm",name:a.name,onClick:b},"\uc815\ubcf4\uac80\uc0c9")),r.a.createElement(f.a.Footer,null,r.a.createElement(E.a,{pill:!0,variant:k(a.remain_stat)},a.distance,"km"),"\xa0",r.a.createElement(E.a,{pill:!0,variant:k(a.remain_stat)},p[a.remain_stat]?p[a.remain_stat].message:"\uc815\ubcf4\uc5c6\uc74c"))))},C=t(48);t(42);var M=function(e){var a=e.variant,t=e.message;return r.a.createElement("div",{className:"info"},r.a.createElement(C.a,{variant:a},t))};o.a.render(r.a.createElement(h,null),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.72d2149d.chunk.js.map